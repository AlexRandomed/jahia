<?xml version="1.0" encoding="UTF-8"?>

<jbpm-configuration>

    <import resource="jbpm.default.cfg.xml"/>
    <!--<import resource="jbpm.businesscalendar.cfg.xml"/>-->
    <import resource="jbpm.tx.hibernate.cfg.xml"/>
    <import resource="jbpm.jpdl.cfg.xml"/>
    <!--<import resource="jbpm.bpmn.cfg.xml" />-->
    <!--<import resource="jbpm.identity.cfg.xml" />-->
    <import resource="jbpm.tx.spring.cfg.xml"/>
    <!-- Job executor is excluded for running the example test cases. -->
    <!-- To enable timers and messages in production use, this should be included. -->
    <import resource="jbpm.jobexecutor.cfg.xml"/>
    <transaction-context>
        <object class="org.jahia.services.workflow.jbpm.JBPMIdentitySession"/>
        <object class="org.jahia.services.workflow.jbpm.JBPMMailSession"/>
    </transaction-context>
    <process-engine-context>
        <object class="org.jahia.services.workflow.jbpm.JahiaBusinessCalendar"/>
        <mail-template name="start-publication-template" language="velocity">
            <to users="${user.getProperty('j:email')}"/>
            <subject>${bundle.getString("workflow.start.mail.subject")} ${date.format("short","short",$submissionDate,$locale)} ${bundle.getString("mail.subject.by")} ${user.getUsername()};</subject>
            <text>${bundle.getString("workflow.start.mail.subject")} ${date.format("short","short",$submissionDate,$locale)} ${bundle.getString("mail.subject.by")} ${user.getUsername()};</text>
        </mail-template>
    </process-engine-context>
</jbpm-configuration>
