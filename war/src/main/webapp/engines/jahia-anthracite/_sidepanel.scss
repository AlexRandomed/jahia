/***********************************************/
/* SIDE PANEL  *********************************/
/***********************************************/

.window-side-panel {
	z-index: 99999!important;
	height: 100%;
	pointer-events: none;

	/* Contains Site Selector and Side Panel Refresh Button */
	.x-panel-header {
		position: absolute !important;
	    top: 9px!important;
		left: 67px !important;
	    z-index: 99999 !important;
	    opacity: 1;
	    width: auto !important;
	    pointer-events: none;
	    background: transparent !important;
		display: none;

		body[data-INDIGO-GWT-FULLSCREEN="on"][data-INDIGO-GWT-SIDE-PANEL="open"] & {
			display: block;
		}

		/* Site Selector */
		.edit-menu-sites {
			pointer-events: all !important;
			width: 220px !important;

			> table {
				width: 100%!important;
			}

			.x-form-field-wrap {
				width:auto!important;
			}
		}

		/* Refresh side panel button */
		#JahiaGxtRefreshSidePanelButton {
		    pointer-events: all;
			background: url(./images/icon-publication-launcher.png) no-repeat center center;

		}

		/* Expand Collaspe Side Bar */
		.x-tool-left {
			display: none;
		}

		.x-panel-toolbar {
			float:none!important;
		}

		body[data-INDIGO-GWT-SIDE-PANEL="open"] & {
			display: block;
		}
	}

	.x-panel-body {
		width: 100% !important;
		overflow: visible;
		z-index: 999;
		position: relative;
		height: calc(100% + 4px) !important;
	}

	/* Left Panel Tab Button Container */
	> .x-panel-bwrap {
		margin-top: 0px;
		width: 60px;
		overflow: visible;
		height: 100% !important;
		z-index: 99;
		position: relative;
		pointer-events: all;
	}

	#JahiaGxtSidePanelTabs {
		position: fixed;
	    width: 60px !important;
	    top: 0;
	    height: 100%;
	    background: red !important;
	    padding-top: 60px;

		/* Side Panel Buttons */
		li {
			float: none;
            width: 50px;
            height: 40px;
            margin-bottom: 10px;
            margin-left: 0;
            opacity: 0.8;
            display: block;
            pointer-events: all;

			img {
				background-size: 23px 23px;
	            background-repeat: no-repeat;
	            padding-left: 23px;
	            width: 23px;
	            height: 23px;
	            overflow: hidden;
	            -moz-box-sizing: border-box;
	            box-sizing: border-box;
	            display: block;
	            left: 14px;
	            position: relative;
			}

			a {
				display: none;
			}

			&::after {
				text-align: center;
	            display: block;
	            margin-top: 5px;
	            text-transform: uppercase;
	            font-size: 8px;
	            font-weight: 400;
	            font-family: "Nunito Sans", sans-serif !important;
	            color: $button_color_off;

				body[data-selection-count="0"] & {
					color: $button_closed_color_up;
				}

				body[data-INDIGO-GWT-SIDE-PANEL="open"] & {
					color: $button_opened_color_up;

				}

			}

			&.x-tab-strip-active::after {
				body[data-INDIGO-GWT-SIDE-PANEL="open"] & {
					color: $button_opened_color_selected;

				}
			}

		}

		.x-grid-panel {
			display: none;
			width: auto!important;
			top: 0!important;
		}

		[data-INDIGO-GWT-SIDE-PANEL="open"] & {
			width: auto!important;

			.x-grid-panel {
				display: block;
			}
		}

		.x-tab-panel-header {
			// Contains the Side Panel Tab Buttons
			width: 60px!important;
			border:none;
			padding: 0;
			background-color: transparent!important;
			display: inline-block;
			vertical-align: top;

			ul.x-tab-strip-top {
				// List for Tab Buttons
				background-color: transparent!important;
				border:none;
				padding: 0;
				margin: 0;
			}
		}

		.x-tab-panel-body {
			// Contains the Side Panel Tabs Content
			display: inline-block;

			width: calc(100% - 60px)!important;
			height: 100%!important;
			vertical-align: top;
			background: transparent;
			margin-top: 30px;

			> .x-component {
				// Common for ALL Side Panel Contents
				height:100%!important;

				&::before {
					content: "Title Here";
				    display: block;
				    color: black;
				    font-size: 26px;
				    font-weight: 200;
				    font-family: Nunito sans;
				    position: absolute;
				    top: 23px;
					left: 70px;
				}

				> .x-border-layout-ct {
					/* Intermediary Container in CREATE tabs */
					height: 100%!important;

					> .x-form-field-wrap {
						/* Contains CREATE Search input */
						position: fixed!important;
						bottom: 10px;
						top:auto!important;
						height: auto!important;
						width: auto!important;
					}

				}

				.x-box-inner {
					height: 100%!important;
					width: 100%!important;

					.x-box-item {
						/* Used in COntent Tabs, 2 x-box-items side by side contain list and results window */
						height: 100%!important;
						display: inline-block;
						position: relative!important;
						width: 50%!important;
						top: 0!important;
						background: transparent!important;

						> .x-component {
							/* Container for List View */
							width: 100%!important;
							background: transparent!important;
							height: calc(100% - 81px)!important;
						}
					}
				}

			}

		}

	}

	// Corrections
	#JahiaGxtSearchTab {
		/* Search Tab doesnt use the typical x-box-inner, so write special rule for its equivalent */
		> .x-panel-mc {
			/* Equivalent of .box-inner */
			width: 100%!important;
			height: calc(100% - 66px)!important;
			background: transparent;

			> .x-panel {
				width: 50%!important;
				display: inline-block;
				height: 100%;
				vertical-align: top;
			}
		}

		.x-panel-bwrap {
			/* Results Container */
			height: 100%;
			position: relative;

			.x-panel-body {}

			.x-grid-panel {
				height: 100%!important;
			}

			/* Footer Action Bars (Search & Paginator) */
			.x-panel-bbar,
			.x-panel-footer {
				position: absolute;
				bottom: 50px;
				z-index: 999;
			}


		}
	}

	#JahiaGxtChannelsTab.tab_channel.x-component { // Excessive Selector is to over rule hard to crush !important already on the element
		/* Need to correct the layout of Left/Right to UP/Down on boxes */
		.x-box-inner {
			.x-box-item {
				width: 100%!important;
				height: 50%!important;
			}
		}



	}

}



/***********************************************/
/* FORMS  **************************************/
/***********************************************/

/* Global Form */
form {
	/* Maybe a little to general */
	padding: 0!important;
	width: auto!important;

}

/* Form Item Wrapper */
.x-form-item {
	/* Form item Outer Container ... */
	margin:0;

	.x-form-element {
		/* Form Item Mid container */
		padding: 0!important;

		.x-form-field-wrap {
			/* Form Item Inner Container */
			left: auto;
			top: auto;
			width: auto!important;
		}

	}
}


/* Form Label */
.x-form-item-label {
	width: auto!important;
	float: none!important;
	padding: 0!important;
	clear: both!important;
	font-family: Nunito Sans;
	font-size: 16px;
	font-weight: 200;
}

/* Text Field Input */
.x-form-text,
.ext-strict .ext-webkit .x-small-editor .x-form-text { /* Lond Selector to overwrite GWT for Site Selector */
	background: blue;
	padding: 5px 40px 5px 20px; /* Leave Space for Trigger Buttons Overlay. If Only Child then remove extra padding below */
	border:1px solid transparent;
	font-family: Nunito Sans;
	font-size: 16px;
	font-weight: 200;
	width: 100%!important;
	color: white;
	box-sizing: border-box;
    display: inline-block;
    height: auto!important;

	&:only-child {
		padding: 5px 20px;
		display: block;
	}
}

/* Action Buttons for Text Input */
.x-form-trigger {
	/* Generic CSS for an Action Button */
	display: block;
	position: absolute!important;
    border: none !important;
    vertical-align: middle;
    right: 1px;
    top: 7px!important;

	.x-form-twin-triggers & {
		/* Button is in a container, because there are multiple buttons */
		display: inline-block;
		position: relative;
		border: none !important;
		vertical-align: middle;
		right: auto;
		top: auto;
	}

	&.x-form-clear-trigger {
		/* Clear button */
		position: absolute!important;
		right: 0px!important;
	}

	&.x-form-trigger-arrow {
		/* Combo Down Arrow Button */
		background: url(./images/icons/combo-arrow.png) no-repeat center center red!important;
	}
}

/* Action Button Container (when multiple buttons exist) */
.x-form-twin-triggers {
	/* Container used when more than one button */
	display: block;
    position: absolute;
    right: 20px;
    top: 0;
}


/* Checkbox Container */
.x-form-check-wrap {
	height: auto!important;
}

/* Checkbox Radio Button */
.x-form-radio {
	left: auto!important;
	top: auto!important;
}

/* Checkbox Label */
.x-form-cb-label {
	margin: 0 0 0 5px;
	padding: 0!important;
	font-family: Nunito Sans;
	font-size: 16px;
	font-weight: 200;
	left: auto!important;
	top: auto!important;
}

/* Button Bars at the end of Panels, ie OK, Save, Cancel, ... */
.x-panel-btns {
	padding: 0;

	.x-panel-fbar {
		/* Button Bar Container ... */
	    padding: 0;
	    left: auto;
	    top: auto;

		.x-toolbar-ct {
			/* Yet Another Container */
			display: block;
			width: auto;
		}
	}
}

/* Button Container */


/* Button Bar, regular button bar */
.x-panel-btns {
	.x-btn {
		button {
			background: green;
			border:none;
			font-family: Nunito Sans;
			font-size: 16px;
			font-weight: 200;
			color: pink;
			padding: 3px 10px!important;
			height: auto!important;
			width: auto!important;

		}

	}
}

/* Button Bar, pagination */
.x-panel-bbar {
	width: 100%;

	.x-toolbar {
		border:none;
		width: auto!important;
		padding: 0;
		margin: 0;
		background: transparent!important;
	}
}



/***********************************************/
/* TREES  **************************************/
/***********************************************/

.x-grid3 {
	/* Container */
	width: 100%!important;
	height: 100%!important;
	background: transparent;

	.x-grid3-header {
		/* Header bar (contains column names) */
		display: none;
	}

	.x-grid3-body {
		/* Contains the Actual List !! */
		height: 100%!important;
	}

	.x-grid3-scroller {
		/* Another List Container */
		height: 100%!important;
		width: 100%!important;
	}

	.x-grid3-viewport {
		/* Another container */
		height: 100%!important;
	}

	.x-tree3-el-jnt,
	.x-tree3-node-joint {
		pointer-events: all;
	}

	/* List Item Backgrounds */
	.x-grid3-row {
		/* List Item */
		height: 25px!important;
		width: 100%!important;
		border: none;



		// Line hover
		&.x-grid3-row-over {
			background: $row_over_background!important;

			.x-tree3-node-icon {
				background-image: url($row_over_icon) !important;
			}

			.x-tree3-node-text {
				color: $row_over_label!important;
			}


		}

		// Line Selected
		&.x-grid3-row-selected {
			background-color: $row_selected_background!important;

			.x-tree3-node-icon {
				background-image: url($row_selected_icon) !important;
			}

			.x-tree3-node-text {
				color: $row_selected_label!important;
			}

			// Line Hover on Selected
			&.x-grid3-row-over {
				background: $row_selected_over_icon!important;

				.x-tree3-node-text {
					color: $row_selected_over_label!important;
				}
			}
		}
	}

	/* List Item Text Label */
	.x-tree3-node-text,
	.x-grid3-cell-inner {
		// List Item Label
		font-family: $font-1;
		font-weight: $extralight;
		color: $row_label;
		font-size: 12px;
		padding: 7px 0 0 !important;
		pointer-events: none;

		&::after {
			content: "More";
			position: fixed;
			left: 270px;
			pointer-events: all;
			margin-top: -21px;
			background-image: url($row_more_options_icon);
			background-repeat: no-repeat;
			background-position: center center;
			background-size: 10px 2px;
			text-indent: -50000px;
			display: block;
			width: 28px;
			height: 25px;
			opacity: 0;
		}
	}

	/* List Item Icon */
	.x-tree3-node-icon {
		background-image: url($row_icon);
		background-size: 23px 23px;
		background-repeat: no-repeat;
		padding-left: 23px;
		width: 23px;
		height: 23px;
		overflow: hidden;
		-moz-box-sizing: border-box;
		box-sizing: border-box;
		position: relative;
	}

	/* List Structure */
	.x-grid3-row-table {
		// Table containing actual List Item
		height: 100%;
		width: 100%!important;

		.x-grid3-cell {
			// Cell Containg the List Item
			padding: 0;

			&.x-grid3-td-locked {
				width: 25px;
				display: none;
			}

			&.x-grid3-td-displayName {
				width: 100%!important;
			}

			.x-grid3-cell-inner {
				// Yet another container ...
				height:100%!important;

				.x-tree3-node {
					// Oooh, another container !!
					height: 100%!important;

					.x-tree3-el {
						// At last, the actual element !!
						height: 100%;
						width: auto!important;
						padding: 2px 0 0px;

						> img,
						> span {
							display: inline-block;
							vertical-align: middle;
						}

						td > .x-tree3-node-icon {
							/* NOT NECCESSARY IN THIS TAB SET */
							display: none;
						}
					}
				}
			}
		}
	}
}

/* END GLOBAL GRID PANEL */





/***********************************************/
/* SIDE PANEL LABELS / WIDTHS  *****************/
/***********************************************/

$side_panel__tab_buttons: (
	// Tab ID							// Tab Label		// Tab Width
	("#JahiaGxtPagesTab",      			$text_pages,    	270),
	("#JahiaGxtCreateContentTab",   	$text_create,    	270),
	("#JahiaGxtContentBrowseTab",   	$text_content,    	550),
	("#JahiaGxtFileImagesBrowseTab",   	$text_files,    	550),
	("#JahiaGxtSearchTab",   			$text_search,    	550),
	("#JahiaGxtCategoryBrowseTab",   	$text_taxonomy,    	550),
	("#JahiaGxtChannelsTab",   			$text_devices,    	270)
);

@each $tab_button in $side_panel__tab_buttons {
	$_tab_ID: #{nth($tab_button,1)};
	$_text: "#{nth($tab_button,2)}";
	$_tab_width: #{nth($tab_button,3)};
	$_line_options_button: (#{nth($tab_button,3) + 25px});

	#{$_tab_ID} {
		width: #{$_tab_width}px!important;

		&::before {
			/* Tab Content Header Label */
			content: "#{$_text}"!important;
		}

		.x-tree3-node-text {
			&::after {
				/* MORE Options button */
				left: #{$_line_options_button}!important;
			}

		}
	}
}









/*******************************************************************************************************************************/
/* SIDE PANEL BUTTONS **********************************************************************************************************/
/*******************************************************************************************************************************/

    // MENUS
        $side_panel__tabs: (
            ("#JahiaGxtSidePanelTabs__JahiaGxtPagesTab",                $text_pages,        $icon_closed_pages,        $icon_open_pages,        $icon_selected_pages,        $icon_off_pages),
            ("#JahiaGxtSidePanelTabs__JahiaGxtCreateContentTab",        $text_create,       $icon_closed_create,       $icon_open_create,       $icon_selected_create,       $icon_off_create),
            ("#JahiaGxtSidePanelTabs__JahiaGxtContentBrowseTab",        $text_content,      $icon_closed_content,      $icon_open_content,      $icon_selected_content,      $icon_off_content),
            ("#JahiaGxtSidePanelTabs__JahiaGxtFileImagesBrowseTab",     $text_files,        $icon_closed_files,        $icon_open_files,        $icon_selected_files,        $icon_off_files),
            ("#JahiaGxtSidePanelTabs__JahiaGxtSearchTab",               $text_search,       $icon_closed_search,       $icon_open_search,       $icon_selected_search,       $icon_off_search),
            ("#JahiaGxtSidePanelTabs__JahiaGxtCategoryBrowseTab",       $text_taxonomy,     $icon_closed_taxonomy,     $icon_open_taxonomy,     $icon_selected_taxonomy,     $icon_off_taxonomy),
            ("#JahiaGxtSidePanelTabs__JahiaGxtChannelsTab",             $text_devices,      $icon_closed_devices,      $icon_open_devices,      $icon_selected_devices,      $icon_off_devices),
            ("#JahiaGxtSidePanelTabs__JahiaGxtSettingsTab",             $text_settings,     $icon_closed_settings,     $icon_open_settings,     $icon_selected_settings,     $icon_off_settings)
        );


        /* Specificities for: PAGES, CREATE, CONTENT, FILES, SEARCH, TAXONOMY, DEVICES, SETTINGS */
        @each $tab in $side_panel__tabs {
			$_tab_ID: #{nth($tab,1)};
			$_text: "#{nth($tab,2)}";
			$_icon_closed: #{nth($tab,3)};
			$_icon_open: #{nth($tab,4)};
			$_icon_selected: #{nth($tab,5)};
			$_icon_off: #{nth($tab,6)};

            #{$_tab_ID} {
				@if ($_tab_ID == "#JahiaGxtSidePanelTabs__JahiaGxtSettingsTab") {
					position: fixed;
					right: 6px;
					bottom: 0;
				}

                img {
                    background-image: url($_icon_off);

                    body[data-selection-count="0"] & {
                        background-image: url($_icon_closed);
                    }

                    body[data-INDIGO-GWT-SIDE-PANEL="open"] & {
						@if ($_tab_ID == '#JahiaGxtSidePanelTabs__JahiaGxtSettingsTab') {
							background-image: url($_icon_closed);

						} @else {
							background-image: url($_icon_open);

						}
                    }


                }

                &.x-tab-strip-active img {
					body[data-INDIGO-GWT-SIDE-PANEL="open"] & {
                        background-image: url($_icon_selected);
                    }

                }

                &::after {
                    content:$_text;

					@if ($_tab_ID == '#JahiaGxtSidePanelTabs__JahiaGxtSettingsTab') {
						body[data-INDIGO-GWT-SIDE-PANEL="open"] & {
							color: $button_closed_color_up!important;
						}
					}
                }
            }
        }


		#JahiaGxtSidePanelTabs__JahiaGxtSettingsTab:nth-child(2) {
			position: relative;

			&.x-tab-strip-active {
				body[data-INDIGO-GWT-SIDE-PANEL="open"] & {
					img {
			            background-image: url(./images/tabs-settings-blue@X2.png);
			        }
				}

			}

			img {
		        background-image: url(./images/tabs-settings-black@X2.png);

		        body[data-selection-count="0"] & {
		            background-image: url(./images/tabs-settings-white@X2.png);
		        }

				body[data-INDIGO-GWT-SIDE-PANEL="open"] & {
					background-image: url(./images/tabs-settings-dark@X2.png);
				}

		    }

			&::after {
		        content: $text_sites;
		    }
		}
